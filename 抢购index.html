
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <meta name="author" content="mengkun">
    <meta name="generator" content="KodCloud">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>2020年VirMach闪购历史数据</title>
    <!-- 不支持IE8及以下版本浏览器 -->
    <!--[if lte IE 8]>
        <script>
            alert("珍爱生命，远离低版本 IE！");
            window.location.href = "http://lab.mkblog.cn/music/plugns/killie/"
        </script>
    <![endif]-->
    <!-- font-awesome 图标字体 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" media="screen" rel="stylesheet" type="text/css">
    
    <!--load bootstrap.min.css-->
    <link href="static_pack/Bootstrap-4-4.1.1/css/bootstrap.min.css" rel="stylesheet" />
    
    <!-- 核心样式文件 -->
    <link rel="stylesheet" href="static_pack/index.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-dark navbar-dark">
        <div class="container">
                <a class="navbar-brand" href="/">
                    <!--<span itemprop="name">VirMach</span>-->
                    <img src="/static_pack/images/logo.png" />
                </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/index.html">实时监控 <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/2019.html">2019年</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/2018.html">2018年</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" target="_blank" href="http://0ddt.com/">零点资源</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" target="_blank" href="http://hostyh.com/">主机优惠网</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      更多
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <a class="dropdown-item" href="#">留言板</a>
                      <a class="dropdown-item" href="#">帮助</a>
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="#">关于</a>
                    </div>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
              <input class="form-control mr-sm-2" type="search" placeholder="输入关键字" aria-label="Search">
              <button class="btn btn-outline-success my-2 my-sm-0" type="submit">查询</button>
            </form>
          </div>
      </div>
    </nav>
    
    <div class="container">
        <section class="section">
            <a name="product">
            </a>
            <h3 class="dt-sub-title">
                2020年VirMach闪购实时数据
            </h3>
            <!--<p class="dt-title-describe" >-->
            <!--    <a href="/2020_q.html" style="color:red">当前为完整版实时监控，点击访问轻量版实时监控</a>-->
            <!--</p>-->
            <!--<p class="dt-title-describe" id="msg">-->
            <!--    <i class="fa fa-spinner fa-spin fa-1x fa-fw" aria-hidden="true"></i> 数据获取中，最新于 <span id="time"></span> 获取-->
            <!--</p>-->
            <!--<p class="dt-title-describe" id="msg" style="color:red">-->
            <!--    数据刷新不及时展示，请清理一下浏览器缓存（快捷键Ctrl+Shift+Delete），谢谢！-->
            <!--</p>-->
            <p class="dt-title-describe" style="color: white;line-height: 2px;"><span class="color1" style="padding: 4px 8px;">惊人折扣</span> |<span class="color2" style="padding: 4px 8px;">绝对超值</span> |<span class="color3" style="padding: 4px 8px;">超值</span> |<span class="color4" style="padding: 4px 8px;">一般</span> |<span class="color5" style="padding: 4px 8px;">便宜货</span> |<span class="color7" style="padding: 4px 8px;">高流量</span> |<span class="color8" style="padding: 4px 8px;">多IP</span> |<span class="color9" style="padding: 4px 8px;">多核心</span> |<span class="color10" style="padding: 4px 8px;">大内存</span> |<span class="color0" style="padding: 4px 8px;">不推荐</span>
            </p>
            <div class="dt-item-box" id="dt-item-box">
                <div id="load" style="text-align: center;"><i class="fa fa-spinner fa-spin fa-1x fa-fw" aria-hidden="true"></i> 数据加载中，请稍等...</div> 
            </div>
            <!-- dt-item-box -->
        </section>
        <!-- class="section" -->
    </div>
    <!-- class=container -->
    
    <div id="progressBar" style="text-align: center;display: none;"><i class="fa fa-spinner fa-spin fa-1x fa-fw" aria-hidden="true"></i> 数据加载中，请稍等...</div> 
    
    <footer class="footer">
        <div class="count">
            『您是本站第
            <img src="//www.amazingcounters.com/counter.php?i=3216768&c=9650617" />
            位访客』
        </div>
        <div class="social">
            <img src="/static_pack/images/aq/txy.png" width="80"> 
            <img src="/static_pack/images/aq/360.png" width="80"> 
            <img src="/static_pack/images/aq/aly.png" width="80"> 
            <img src="/static_pack/images/aq/ypy.png" width="80"> 
            <img src="/static_pack/images/aq/wxpay.png" width="80"> 
            <img src="/static_pack/images/aq/zfb.png" width="80"> 
        </div>
        <div class="web-record">
            Copyright © 2018-2020 
            <a href="http://www.0ddt.com/" target="_blank" rel="nofollow">
                零点数据
            </a>. All Rights Reserved
            <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1279512434'%3E%3C/span%3E%3Cscript src='https://s9.cnzz.com/stat.php%3Fid%3D1279512434%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
        </div>
    </footer>
    <!-- 返回顶部 -->
    <div class="dt-uptop" title="点击返回顶部"></div>
    
    <div class="animation_box"><img src="/static_pack/images/dinosaur.gif" class="animation_img"></div>
    <!--load jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!--load bootstrap.min.js-->
    <script src="static_pack/Bootstrap-4-4.1.1/js/bootstrap.min.js"></script>
    <!--load pagination.js-->
    <script src="static_pack/pagination/pagination.js"></script>

    <script>
    $(function() {
        // 监听滚动变化
        $(window).scroll(function() {
            if ($(window).scrollTop() < 300) {
                $(".dt-uptop").removeClass("show");
            } else {
                $(".dt-uptop").addClass("show");
            }
        });
        // 返回顶部
        $(".dt-uptop").click(function() {
            $("html, body").animate({
                scrollTop: 0
            },
            "normal");
            return false;
        });
        
        getData();
        var ver = 0;
        var json_temp = {};
        function run(){
            try{
                $.ajax({
                    type: "GET",  
                    dataType: "json",  
                    timeout: 5000,
                    url: "/new.json?_" + new Date().getTime(),      //提交到一般处理程序请求数据
                    success: function(data) {
                        setData(data);
                    },
                    complete: function(x,t){
                        /*setTimeout(function(){
                            run();
                        },500);*/
                    }
                }); 
            }catch(ex){
            	console.log(ex)
            }
        }
        
        function setData(data){
            $("#time").text(curentTime());
            if(ver > 0 && ver != data.ver){
                location.reload();
            }
            if(data.datetime != "" && data.datetime != null){
        	    if(json_temp.datetime != data.datetime){
                    var list = [];
                    list.push(data);
            	    var html = setHmtl(list);
            	    if(json_temp == {} || !data.ended){
            	        if($("#dt-item-box").html().indexOf(data.datetime)==-1){
            	            $("#dt-item-box").html(html + $("#dt-item-box").html())
                	        if(data.discount.rank < 3 && data.discount.rank != 0){
                                text2audio("嘤嘤嘤！监控提醒您，当前主鸡，" + data.discount.text + "," + data.price + "刀," + data.location);
                	        }
            	            flash(data);
                            notifyMe(data);
            	        }
            	    }
        	    }
        	    if(json_temp.ended != data.ended){
            	    var dt_item = $("#dt-item-box").find(".dt-item").first();
            	    $(".nowaterbtn").removeClass("blue_btn");
            	    $(".nowaterbtn").addClass("blue_btn");
            	    $(".nowaterbtn").text("已售罄");
            	    var dt_nowaterbtn = dt_item.find(".nowaterbtn").first();
            	    if(data.ended){
            	        dt_nowaterbtn.text('已售罄，等待刷新');
            	    }else{
            	        dt_nowaterbtn.removeClass("blue_btn");
            	        dt_nowaterbtn.text('立即下单');
            	    }
        	    }
            }
            json_temp = data;
    	    ver = data.ver;
        }
        //获取数据
        function getData(){
            $.ajax({
                type: "GET",  
                dataType: "json",  
                url: '/api.php?all=2020',      //提交到一般处理程序请求数据
                success: function(data) {
                    json_temp = data[0];
                    json_temp.ended = undefined;
                    var html = setHmtl(data);
                    $("#dt-item-box").append(html);
                    $('#load').hide();
                    run();
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    console.clear();
                    // getData();
                }
            }); 
        }
        //设置列表html
        function setHmtl(data){
            var html='';
            for(var i=0;i<data.length;i++){
                html +='<div class="dt-item">';
                html +='    <a href="https://billing.virmach.com/aff.php?aff=8971&pid=0179&billingcycle=annually" target="_blank">';
                html +='        <article class="dt-color-item dt-color-item-bg color'+ data[i].discount.rank +' Discounts'+ data[i].discount.rank +'">';
                html +='            <span class="dt-silk"><h3>$'+ data[i].price+' /年</h3></span>';
                html +='             <ul class="dt-item-ul">';
                html +='                <li class="msg" title="' + data[i].virt + '–' + data[i].message + '">';
                html +='                    <img alt="VIRTUALIZATION" src="/static_pack/images/3d.png">';
                html +='                    <span>';
                html +='                        ' + data[i].virt + '–' + data[i].message + '';
                html +='                    </span>';
                html +='                </li>';
                html +='                <li class="msg" title="Windows ' + data[i].windows+ '">';
                html +='                    <img alt="WINDOWS" src="/static_pack/images/windows.png" >';
                html +='                    <strong>';
                html +='                        Windows';
                html +='                    </strong>';
                html +=                     data[i].windows;
                html +='                </li>';
                html +='                <li class="msg" title="' + data[i].ram + ' MB内存">';
                html +='                    <img alt="RAM" src="/static_pack/images/ram.png">';
                html +='                    <strong>';
                html +='                        ' + data[i].ram + '';
                html +='                    </strong>';
                html +='                    MB内存';
                html +='                </li>';
                html +='                <li class="msg" title="' + data[i].cpu + 'x 核心">';
                html +='                    <img alt="CPU" src="/static_pack/images/cpu.png">';
                html +='                    <strong>';
                html +='                        ' + data[i].cpu + 'x';
                html +='                    </strong>';
                html +='                    核心';
                html +='                </li>';
                html +='                <li class="msg" title="' + data[i].hdd + ' GB硬盘">';
                html +='                    <img alt="HDD" src="/static_pack/images/disk.png">';
                html +='                    <strong>';
                html +='                        ' + data[i].hdd + '';
                html +='                    </strong>';
                html +='                    GB硬盘';
                html +='                </li>';
                html +='                <li class="msg" title="' + data[i].bw + ' GB流量">';
                html +='                    <img alt="BANDWIDTH" src="/static_pack/images/network.png">';
                html +='                    <strong>';
                html +='                        ' + data[i].bw + '';
                html +='                    </strong>';
                html +='                    GB流量';
                html +='                </li>';
                html +='                <li class="msg" title="' + unescape(data[i].location) + '">';
                html +='                    <img alt="LOCATION" src="/static_pack/images/server.png">';
                html +='                    <strong>';
                html +='                        ' + unescape(data[i].location) + '';
                html +='                    </strong>';
                html +='                </li>';
                html +='                <li class="msg" title="' + data[i].ips + ' 独享IPv4">';
                html +='                    <img alt="IPs" src="/static_pack/images/ip.png">';
                html +='                    <strong>';
                html +='                        ' + data[i].ips + '';
                html +='                    </strong>';
                html +='                    独享IPv4';
                html +='                </li>';
                html +='                <li class="msg" title="' + data[i].datetime + '">';
                html +='                    <img alt="Date" src="/static_pack/images/time.png">';
                html +='                    <strong>';
                html +='                        ' + data[i].datetime + '';
                html +='                    </strong>';
                html +='                </li>';
                html +='            </ul>';
                html +=             '<div class="nowaterbtn blue_btn">已售罄</div>';
                html +='            <i class="light"></i>';
                html +='        </article>';
                html +='    </a>';
                html +='</div>';
                html +='<!-- dt-item -->';
            }
            return html;
        }
        
        function text2audio(zhText) {
        	zhText = encodeURI(zhText);
        	var audio= new Audio("http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&spd=5&text="+ zhText);//这里的路径写上mp3文件在项目中的绝对路径
        	audio.play();//播放
        }
        
        function curentTime() {
            var now = new Date();
    
            var year = now.getFullYear();       //年
            var month = now.getMonth() + 1;     //月
            var day = now.getDate();            //日
    
            var hh = now.getHours();            //时
            var mm = now.getMinutes();          //分
            var ss = now.getSeconds();          //分
    
            var clock = year + "-";
    
            if(month < 10)
                clock += "0";
    
            clock += month + "-";
    
            if(day < 10)
                clock += "0";
    
            clock += day + " ";
    
            if(hh < 10)
                clock += "0";
    
            clock += hh + ":";
            if (mm < 10)
                clock += '0';
            clock += mm + ":";
    
            if (ss < 10)
                clock += '0';
            clock += ss;
            return clock;
        }
        
        function flash(){
            $('body').addClass('flash');
            setTimeout(function(){
                $('body').removeClass('flash');
            },5000);
        }
        
        function notifyMe(data) {
            Notification.requestPermission(status=>{
                if(status === 'granted'){
                    
                    var text =  'ＩＰ：' + data.ips + '      价格：$' + data.price + ' /y\r\n';
                        text += '核心：' + data.cpu + ' H    内存：' + data.ram + ' M\r\n';
                        text += '磁盘：' + data.hdd + ' G   流量：' + data.bw + ' G\r\n';
                        text += '位置：' + unescape(data.location);
                    var rank_text = '';
                    if(data.discount.text != ""){
                        rank_text = '【' + data.discount.text + '】 - ' ;
                    }
                    var notify = new Notification(rank_text + 'VirMach.Me - 闪购提醒',{
                        icon:'./favicon.png',
                        body:text
                    })
    
                    // 点击时桌面消息时触发
                    notify.onclick = ()=>{
                        // 跳转到当前通知的tab,如果浏览器最小化，会将浏览器显示出来
                                       //在另外新建窗口中打开窗口
                        var url = 'https://billing.virmach.com/aff.php?aff=8971&pid=0179&billingcycle=annually';
                        window.open(url);
                    }
                }
            })
        }
        
        // 获得通知权限
        Notification.requestPermission();
    });
    
    
    </script>
</body>

</html>